<!doctype html>
<html lang="ja" xml:lang="ja">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="pragma" content="no-cache">
    <meta http-equiv="cache-control" content="no-cache">
    <meta http-equiv="expires" content="-1">
    <meta name="format-detection" content="telephone=no">
    <title>아이돌마스터 신데렐라 걸즈</title>
    <link rel="stylesheet" type="text/css" href="../../../../12008305/css/rich%2Fnew_mypage_common.css" media="all">
    <link rel="apple-touch-icon-precomposed" href="../../../../12008305/image_sp/ui/icon_bookmark.png">
    <script>
        (function() {
            window.console.log = function() {};
        })();
    </script>
    <script type="text/javascript">
        if (window.localStorage) {
            var displaySet = localStorage.getItem('DisplayPositionSet');
            if (displaySet == 1) {
                if (navigator.userAgent.indexOf('Android') > 0) {
                    document.write('<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">');
                    document.getElementsByTagName('html')[0].style.zoom = document.documentElement.clientWidth / 320;
                } else {
                    document.write('<meta name="viewport" content="width=320, user-scalable=no">');
                }
                window.addEventListener('resize', function() {
                    if (navigator.userAgent.indexOf('Android') > 0) document.getElementsByTagName('html')[0].style.zoom = document.documentElement.clientWidth / 320;
                });
            } else {
                document.write('<meta name="viewport" content="width=device-width, user-scalable=no">');
            }
        } else {
            document.write('<meta name="viewport" content="width=device-width, user-scalable=no">');
        }
    </script>
    <script src="../../../../12008305/js/jquery-2.2.2.min.js"></script>
    <script>
        (function() {
            window.viewer_id = 139087231;
            var _url = "http://sp.pf.mbga.jp/12008305/?guid=ON&amp;url=http%3A%2F%2F125.6.169.35%2Fidolmaster%2Fgame_error%2Freport_js_error%3Fl_frm%3DValentine_present_select_base_idol_1%26rnd%3D180545266";
            var _path = location.href;
            var _spec_obj;
            var _spec = 'none';
            var version = 1;
            // access方法検出
            _spec_obj = {
                'isNative': false,
                'isAndApp': false,
                'isShellApp': false,
                'isIosApp': false,
                'isChromeApp': false
            };
            window._spec = _spec_obj;
            if (_spec.isAndApp) {
                _spec = 'andapp'
            } else if (_spec.isIosApp) {
                _spec = 'iosApp';
            } else if (_spec.isShellApp) {
                _spec = 'shellapp';
            } else {
                _spec = 'browser?';
            }
        })();
    </script>
    <script src="../../../../12008305/js/underscore-min.js"></script>
    <script src="../../../../12008305/js/require.js"></script>
    <script src="../../../../12008305/js/require.js"></script>
    <script>
        requirejs.config({
            paths: {
                easeljs: "../../../../12008305/js/easeljs-0.8.2.min.js",
                easeljs_0_7_1: "../../../../12008305/js/easeljs-0.7.1.min.js", //スプライトを読むためのバージョン
                tweenjs: "../../../../12008305/js/tweenjs-0.6.2.min.js",
                movieclipjs: "../../../../12008305/js/movieclip-0.7.1.min.js",
                createjs: "../../../../12008305/js/createjs-2015.11.26.min.js",
            }
        })
    </script>
    <script src="../../../../12008305/js/common.js"></script>
    <script src="../../../../12008305/js/common_new.js"></script>
    <script>
        $(function() {
            window.$ibox = $('.ibox').ibox();
        });
    </script>
    <script>
        $(document).ready(function() {
            if (typeof newrelic === 'object' && typeof newrelic.setPageViewName === 'function') {
                newrelic.setPageViewName('/idolmaster/index.php/campaigns/valentine_present/select_base_idol/0/0/12/1');
            }
        });
    </script>
    <script type='text/javascript'>
        var se_flg = 0,
            bgm_flg = 0,
            chrome_app_flg = 0,
            chrome_app_extension_id = 'dnacabmnfmejgfffmcehejcmiciinpej';
    </script>
    <script type='text/javascript' src='../../../../12008305/js/app_sound.js'></script>
    <link rel="stylesheet" type="text/css" href="../../../../css/base.css" />
</head>

<body id="valentine_present" class="select_base_idol">
    <div id="top" class="page_container jsOnBtn">
        <nav class="area_menu_header">
            <div class="area_menu_header_6btn">
                <h1 id="JtextLimit">발렌타인</h1>
                <ul>
                    <li><a class="head_menu_01" href="">
                            <div></div>
                        </a></li>
                    <li><a class="head_menu_02" href="">
                            <div></div>
                        </a></li>
                    <li><a class="head_menu_03" href="">
                            <div></div>
                        </a></li>
                    <li><a class="head_menu_04" href="">
                            <div></div>
                        </a></li>
                    <li><a class="head_menu_05" href="">
                            <div></div>
                        </a></li>
                    <li><a class="head_menu_06 se_000" href="#" id="headerAcd">
                            <div></div>
                        </a></li>
                </ul>
            </div>
        </nav>
        <input id="delay" type="hidden" value="0">
        <link rel="stylesheet" type="text/css" href='../../../../12008305/css/rich/valentine2021.css' media="all">
        <div class="valentine_main_2021">
            <img class="" src='../../../../12008305/image_sp/campaign/valentine/2021/header/top.png' width="320px">
            <div class="valentine_wrapper" style="padding-bottom:0; margin-top: 0; margin-bottom:16px;">
                <div class="_title">
                    <img src='../../../../12008305/image_sp/campaign/valentine/2021/text_1.png' width="304px" class="m-Cnt">
                </div>
                <div class="recieved_idol_btn jsOnDesignBtn"></div>
                <div class="valentine_select_base">
                    <a href="#" class="v_btn_idol js_ibox_trigger jsOnDesignBtn" data-id="26" data-name_id="026" data-name="一ﾉ瀬志希" data-attr="1" data-keyword="" data-bg="17" data-have_seen="1" data-offset="24" data-image="../../../../12008305/image_sp/item/l/petit_cg/chara/1043.png" data-petit="1/ajax_petit_idol_avatar_data/1043">
                        <div class="v_btn_bg attr_1">
                            <img class="v_idol top_adjust1" src='../../../../12008305/image_sp/item/l/petit_cg/chara/1043.png'>
                        </div>
                        <span class="v_idol_name attr_1">이치노세 시키</span>
                    </a>
                </div>
            </div>
        </div>
        <div class="selectArea type_02 _information m-Top8">
            <div class="selectArea_accordion_headline">
                주의사항
            </div>
            <div class="selectArea_accordion">
                <div class="selectArea_accordion_title">
                    <div>발렌타인 프레젠트 캠페인에 대해서</div>
                </div>
                <div class="selectArea_accordion_body t-Lft">
                    <div class="selectArea_accordion_body_inner">
                        <p>・캠페인 기간 동안 아이돌을 만나러 갈 수 있습니다.</p>
                        <p>・만나러 간 아이돌에게서, 최대 3명에게 발렌타인 선물을 받을 수 있습니다.</p>
                        <p class="gray">※받은 선물은 선물함으로 보내집니다.</p>
                        <p>・같은 아이돌에게 선물은 1번만 받을 수 있습니다.</p>
                        <p>・본 캠페인으로 만나러 갈 수 있는 아이돌은, 푸치데렐라가 추가되어 있는 아이돌입니다.</p>
                        <p>・캠페인 기간 동안에는 여러번 애니메이션 언출을 볼 수 있습니다.</p>
                        <p>・서버의 리스폰스 상황, 통신 상황에 따라 애니메이션 연출을 볼 수 없는 경우가 있습니다. 미리 양해 부탁드립니다.</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="m-Top12">
            <a href='https://crow88.github.io/lab/'>
                <div class="backLink">돌아가기</div>
            </a>
        </div>
        <img src='../../../../12008305/image_sp/__DUMMY__.png' id="js_dummy_path" style="display:none">
        <script type="text/template" id="template_idol_confirm">
            <div class="idol_confirm-area bg_<%- bg %> p-Btm2"><div class="idol-area"><div id="animation-container"></div><div class="name_plate"><img src="<%- name_plate_path %>"></div></div><div class="text-area p-Btm4"><p class="popup_text m-Btm12 t-Cnt"><span class="attr_<%- attr %>"><%- name %></span><% if(checkbox && !have_seen) { %>に会いにいきます。<% }else{ %>との思い出を振り返ります。<% } %></p><% if(checkbox && !have_seen) { %><p class="popup_text font-size-11 t-Cnt"><span class="red">一度選択すると変更することはできません。</span><br>あと<span class="yellow">2</span>人からもらえます。</p><% } %><form action='https://crow88.github.io/lab/12008305/campaigns/valentine_present/2020/1/' method="get"><input type="hidden" name="keyword" value="<%- keyword %>"><input type="hidden" name="offset" value="<%- offset %>"><input type="hidden" name="idol_base_id" value="<%- id %>"><% if(checkbox && !have_seen) { %><div class="search_checkbox_2 popup_chk_box m-Cnt m-Top8"><span class="line_2">このアイドルから<br>ギフトをもらう</span><input class="checkbox" type="checkbox" value="1" name="confirm_flag"></div><% } %><% submit_class = (checkbox && !have_seen) ? '_disabled' : ''%><label class="<%- submit_class %>"><% if(checkbox && !have_seen) { %><input type="submit" class="submit-button m-Cnt m-Top8 jsOnDesignBtn"><div class="disabled-button m-Cnt m-Top8"></div><% } %><% if(!checkbox || have_seen) { %><input type="submit" class="submit-button2 m-Cnt m-Top8 jsOnDesignBtn"><% } %></label></form></div></div>
</script>
        <script src="../../../../12008305/js/ilibrary.js"></script>
        <script src="../../../../12008305/js/petit_cg/cheek/cheek1.js"></script>
        <script src="../../../../12008305/js/petit_cg/cheek/cheek2.js"></script>
        <script src="../../../../12008305/js/petit_cg/cheek/cheek3.js"></script>
        <script src="../../../../12008305/js/min/petit_manager_cjs_2.min.js"></script>
        <script type="text/template" id="template_recieved_idol">
            <div class="idol_recieved_area">
<div id="animation-container"></div>
<div class="name_plate num_1">
<img src='../../../../12008305/image_sp/ui/coming_tv/name_tag_horizontal/026.png'>
</div>
<div class="remember_btn_area num_1">
<form action='http://sp.pf.mbga.jp/12008305/?guid=ON&amp;url=http%3A%2F%2F125.6.169.35%2Fidolmaster%2Fcampaigns%2Fvalentine_present%2Fsee_idol_flash%3Fl_frm%3DValentine_present_select_base_idol_2%26rnd%3D915116569' method="post">
<input type="hidden" name="offset" value="24">
<input type="hidden" name="keyword" value="">
<input type="hidden" name="idol_base_id" value="26">
<input type="submit" class="jsOnDesignBtn">
</form>
</div>
</div>
</script>
        <script type="text/template" id="template_item_get">
            <div class="item_recieved_area">
<div class="recieved-item-img">
<img src="<%- _imgPath %>">
</div>
<div class="popup_text t-Cnt">
<p class="m-Top6 m-Btm12">
<span class="attr_<%- attr %>"><%- name %></span>からギフトをもらいました。
</p>
<p class="font-size-11">
ギフトは贈り物リストに送られました。
</p>
<div class="m-Cnt m-Top6">
<a href="http://sp.pf.mbga.jp/12008305/?guid=ON&amp;url=http%3A%2F%2F125.6.169.35%2Fidolmaster%2Fpresent%2Frecieve%2F%3Fview_auth_type%3D1%26cache%3D1%26l_frm%3DValentine_present_select_base_idol_2%26rnd%3D378744072">
<img src='../../../../12008305/image_sp/campaign/valentine/2021/sprite/button_gift_list.png' class="button_gift_list jsOnDesignBtn">
</a>
</div>
</div>
</div>
</script>
        <script>
            $(function() {
                window.dummy_path = $('#js_dummy_path').attr('src');
                var is_popup_open = false;
                var cjs_file = ['../../../../12008305/js/petit_cjs/petit_base.js'];
                var petitManager = window.petitManager || new PetitManager();
                var petitCanvasWidth = 608;
                var petitCanvasHeight = 386;
                var charaManager = [];
                var characterList = [];
                var petie_list = [{
                    "attribute": "1",
                    "body_type": "1",
                    "breast_size": "2",
                    "short_name": "\u5fd7\u5e0c",
                    "image_url_list": {
                        "expression_1043": "../../../../12008305/js/petit_cg/expression/1043.js",
                        "hair_10043": "../../../../12008305/js/petit_cg/hair/10043.js",
                        "costume_1_20043": "../../../../12008305/js/petit_cg/costume/1/20043.js"
                    },
                    "sub_type_list": {
                        "head": null,
                        "hand": null,
                        "leg": null
                    },
                    "take_sub_type": {
                        "head": 1,
                        "hand": 1,
                        "leg": 1
                    },
                    "petit_csv_info_list": {
                        "costume_1_20043": {
                            "image_path": "../../../../12008305/image_sp/item/l/petit_cg/20043",
                            "accessory_name": "\u5236\u670dA\u30fb\u5fd7\u5e0c",
                            "explanation": "\u5fd7\u5e0c\u306e\u5b66\u6821\u306e\u5236\u670d\u3067\u3059\u3002<br>\u7740\u5d29\u3057\u3061\u3083\u3046\u306e\u304c\u5fd7\u5e0c\u6d41\u2026?",
                            "type_id": "2"
                        }
                    },
                    "petit_csv_sub_type_info_list": []
                }];
                if (window.popup == void 0) window.popup = popup = new Commonjs.Popup();
                var template = $('#template_idol_confirm').html();
                var recieved_template = $('#template_recieved_idol').html();
                var item_get_template = $('#template_item_get').html();
                var checkbox = 1;
                $('.js_ibox_trigger').on('click', function(e) {
                    e.preventDefault();
                    if (is_popup_open) {
                        return;
                    } else {
                        is_popup_open = true;
                    }
                    var param = $(this).data();
                    param.checkbox = checkbox;
                    $.ajax({
                        url: param.petit,
                        type: 'post',
                        history: 0
                    }).success(function(data) {
                        if (typeof data.accessory_list === "undefined") {
                            location.href = 'http://sp.pf.mbga.jp/12008305/?guid=ON&amp;url=http%3A%2F%2F125.6.169.35%2Fidolmaster%2Fgame_error%3Fl_frm%3DValentine_present_select_base_idol_1%26rnd%3D943924757';
                            return;
                        }
                        characterList = [];
                        characterList[0] = data.accessory_list;
                        charaManager = [];
                        petitManager.constructor();
                        petitManager.canvas_width = petitCanvasWidth;
                        petitManager.canvas_height = petitCanvasHeight;
                        petitManager.canvas_recreate_flag = true;
                        var deffered = petitManager.requireCJS(cjs_file);
                        deffered.done(function() {
                            petitManager.setCharacters(characterList);
                            charaManager = petitManager.getAllChracter();
                        });
                        petitManager.loaded_action = function() {
                            petitManager.stage.removeAllChildren();
                            charaManager[0].cjs['visible'] = true;
                            charaManager[0].cjs.scaleX = charaManager[0].cjs.scaleY = 2.2;
                            charaManager[0].cjs['x'] = petitCanvasWidth / 2 + 16;
                            charaManager[0].cjs['y'] = petitCanvasHeight - 30;
                            petitManager.stage.addChild(charaManager[0].cjs);
                            petitManager.stage.update();
                        }
                        param.name_plate_path = dummy_path.replace('__DUMMY__.png', 'ui/coming_tv/name_tag_horizontal/' + param.name_id + '.png');
                        popup.set({
                            "title": "アイドル確認",
                            "contents": _.template(template, param),
                            "full_display_flg": true,
                            "new_layout": true
                        });
                        if (checkbox) {
                            popup.on('open', function() {
                                setSearchCheckBox(".popup_chk_box");
                            });
                        }
                        popup.on('close', function() {
                            is_popup_open = false;
                        });
                        popup.open();
                    });
                });
                $('.recieved_idol_btn').on('click', function(e) {
                    e.preventDefault();
                    if (is_popup_open) {
                        return;
                    } else {
                        is_popup_open = true;
                    }
                    var deffered = petitManager.requireCJS(cjs_file);
                    petitManager.constructor();
                    petitManager.canvas_width = 608;
                    petitManager.canvas_height = 436;
                    petitManager.canvas_recreate_flag = true;
                    charaManager = [];
                    deffered.done(function() {
                        petitManager.setCharacters(petie_list);
                        charaManager = petitManager.getAllChracter();
                    });
                    var charaPositionX = [
                        [petitCanvasWidth / 2 + 14],
                        [petitCanvasWidth / 3 + 10, (petitCanvasWidth / 3) * 2 + 10],
                        [petitCanvasWidth / 2 + 14, petitCanvasWidth / 4 - 28, (petitCanvasWidth / 4) * 3 + 50]
                    ];
                    petitManager.loaded_action = function() {
                        petitManager.stage.removeAllChildren();
                        var charaCount = Object.keys(charaManager).length - 1;
                        var count = 0;
                        for (var i in charaManager) {
                            charaManager[i].cjs['visible'] = true;
                            charaManager[i].cjs.scaleX = charaManager[i].cjs.scaleY = 1.9;
                            charaManager[i].cjs['x'] = charaPositionX[charaCount][count];
                            charaManager[i].cjs['y'] = 314;
                            petitManager.stage.addChild(charaManager[i].cjs);
                            count++;
                        }
                        petitManager.stage.update();
                    }
                    popup.set({
                        "title": "선물을 받은 아이돌",
                        "contents": _.template(recieved_template, $(this).data()),
                        "full_display_flg": true,
                        "new_layout": true
                    });
                    popup.on('close', function() {
                        is_popup_open = false;
                    });
                    popup.open();
                });
                var setSearchCheckBox = function(checkbox) {
                    $(checkbox).on('click', function(e) {
                        var $t = $(e.currentTarget);
                        if ($t.hasClass("_selected")) {
                            $t.removeClass("_selected");
                            $t.find("input").prop("checked", false).trigger('change');
                            $t.next().addClass('_disabled');
                            $t.next().find("input").prop('disabled', true);
                        } else {
                            $t.addClass("_selected");
                            $t.find("input").prop("checked", true).trigger('change');
                            $t.next().removeClass('_disabled');
                            $t.next().find("input").prop('disabled', false);
                        }
                    })
                };
                Commonjs.setSearchClear({
                    $trigger: $(".js_btn_clear"),
                    targets: [$("#search_idol_name"), $('.checkbox')],
                });
                Commonjs.setSearchCheckBox($(".chk_box"));
                Commonjs.setSearchMore({
                    $trigger: $("#js_btn_deck_search_more"),
                    $contents: $("#js_deck_search_more_contents"),
                });
                Commonjs.setAccordion();
                Commonjs.setSearchCheckBox($(".search_checkbox_2, .search_checkbox_single"));
                Commonjs.setSearchMore({
                    $trigger: $("#js_btn_search_more"),
                    $contents: $("#js_search_more_contents"),
                });
            });
        </script>
        <footer>
            <div class="line_idolmaster"></div><a href="#top" id="toPageTop" class="mypage_under">
                <div></div>
            </a>
            <div class="t-Cnt">(C)窪岡俊之 (C)2011 BNEI</div>
        </footer>
    </div>
    <script>
        window._tarminal = {
            'native_app_flg': false,
            'android_app_flg': false,
            'ios_app_flg': false,
            'shell_app_flg': false
        };
    </script>
    <script>
        window._tarminal = {
            'native_app_flg': false,
            'android_app_flg': false,
            'ios_app_flg': false,
            'shell_app_flg': false
        };
    </script>
    <div id="mbga-pf-footer">
        <script type="text/javascript" charset="UTF-8">
            (function() {
                document.addEventListener('DOMContentLoaded', function() {
                    var list = document.getElementsByClassName('mbga-pf-footer-li');
                    var i = 0,
                        l = list.length;
                    for (; i < l; i++) {
                        var elem = list[i];
                        elem.addEventListener('touchstart', function(e) {
                            e.currentTarget.className = e.currentTarget.className.replace(/$/, ' mbga-pf-tapped');
                        });
                        elem.addEventListener('touchend', function(e) {
                            e.currentTarget.className = e.currentTarget.className.replace(/ mbga-pf-tapped/, '');
                        });
                        elem.addEventListener('touchmove', function(e) {});
                    }
                });
            })();
        </script>
    </div>
</body>

</html>
