"use strict";define([window.Game.js_url_list.tone,window.Game.js_url_list.const,window.Game.js_url_list.util],function(t,i,s){var e=window.createjs,a=function(t,s,a,o){this.originType="special",this.type=t,this.stage=s,this.special_draw=o,this.state="Wait",this.sprite={},this.sprite.main=new e.Bitmap(a.toneDom[this.type]),this.sprite.main.scaleX=i.NORMAL_SCALE,this.sprite.main.scaleY=i.NORMAL_SCALE,this.sprite.main.regX=i.NORMAL_TONE_HALF_SIZE,this.sprite.main.regY=i.NORMAL_TONE_HALF_SIZE,this.sprite.main.x=i.NORMAL_START,this.sprite.main.y=i.GOAL_Y,this.position={},this.position.x=i.NORMAL_START,this.position.tail_x=i.NORMAL_START,this.position.body=0,this.ShowState={fall:"fall",ready:"ready",on:"on",off:"off"}},o=a.prototype;return o.setDrawX=function(){var t=this.sprite.main.x;this.getXposition()>i.NORMAL_START||(i.GOAL_X<=this.getXposition()?t=this.position.x:i.GOAL_X>=this.getTailXposition()?this.state==this.ShowState.ready?(t=this.position.tail_x,this.special_draw.iterator.fever.is_fever()?this.special_draw.setup_animation("fever"):this.special_draw.iterator.parent.gauge.is_max()?this.special_draw.setup_animation("full_wait"):this.special_draw.setup_animation("wait"),this.special_draw["$"+this.type].hide(),this.state=this.ShowState.fall):this.state==this.ShowState.fall?t=this.position.tail_x:this.state!=this.ShowState.off&&(this.motion=0,this.state=this.ShowState.off,this.special_draw.setup_animation(this.type+"_bad"),this.special_draw.$char_don.removeAttr("data-type"),this.special_draw["$"+this.type].hide(),this.special_draw.bad_animation()):(t=i.GOAL_X,this.state==this.ShowState.fall&&this.special_draw.setReady(this))),this.sprite.main.x=t},o.setXposition=function(t){this.position.x=t},o.setTailXposition=function(t){this.position.tail_x=t,this.position.body=t-this.getXposition(),this.state=this.ShowState.fall,this.setDrawX()},o.getXposition=function(){return this.position.x},o.getTailXposition=function(){return this.position.tail_x},o.getBodyLength=function(){return this.position.body},o.show=function(){this.stage.addChild(this.sprite.main)},o.hide=function(){this.stage.removeChild(this.sprite.main)},o.setZindex=function(t){this.stage.setChildIndex(this.sprite.main,t)},o.update=function(t){var i=s.calculate(this.note.time,t);return this.afterMath(i,t)},o.delayUpdate=function(t,i){var s=this.getXposition()-t;return this.afterMath(s,i)},o.afterMath=function(t,s){var e=i.NOTING,a=t+this.getBodyLength();return a<i.END_POINT?e=i.END_TONE:(this.position.x=t,this.position.tail_x=a,this.setDrawX(),this.note.state==i.State.Fall&&this.note.extension<s&&(this.note.state=i.State.Miss)),e},a});