"use strict";define(["jquery",window.Game.js_url_list.const,window.Game.js_url_list.sound_loader,window.Game.js_url_list.option_storage],function(e,o,n,a){var t={},d=window.boombox;return t.speed_multiply=1/o.SPEED,t.strKey={e:1,n:2,h:3},t.numKey={1:"e",2:"n",3:"h"},t.seReady=!1,t.seList={don:window.Game.se1,ka:window.Game.se2,paper_great:window.Game.se3,paper_good:window.Game.se4,paper_bad:window.Game.se5,balloon:window.Game.se6},t.calculate=function(e,n){if(void 0==n)return null;var a=(Math.floor(e)-n)*this.speed_multiply;return o.GOAL_X+o.NORMAL_LENGTH*a},t.isExcellent=function(e,o){var n=parseInt(e.time)+.75*(e.extension-e.time);return o<n},t.convertKeyName=function(o){return e.isNumeric(o)?t.numKey[o]:t.strKey},t.rejecter=function(e){for(var o in e){var n=e.shift();n.reject()}},t.doNoting=function(){},t.setSoundjsSE=function(){var o=new e.Deferred;return a.getSeSetting()?e.when(n.loadSound("don",window.Game.se1),n.loadSound("ka",window.Game.se2),n.loadSound("paper_great",window.Game.se3),n.loadSound("paper_good",window.Game.se4),n.loadSound("paper_bad",window.Game.se5),n.loadSound("balloon",window.Game.se6)).done(function(){o.resolve(),t.seReady=!0,t.setReturn()}).fail(function(){o.reject()}):o.resolve(),o.promise()},t.playSounjsSE=function(e){a.getSeSetting()&&(void 0==t[e+"_se"]&&(t[e+"_se"]=window.createjs.Sound.createInstance(e)),t[e+"_se"].play(window.createjs.Sound.INTERRUPT_NONE,0,0,0,.7))},t.setBoomboxSE=function(){var o=e.Deferred();return a.getSeSetting()?e.when(t.boomboxPreload("don",window.Game.se1),t.boomboxPreload("ka",window.Game.se2),t.boomboxPreload("paper_great",window.Game.se3),t.boomboxPreload("paper_good",window.Game.se4),t.boomboxPreload("paper_bad",window.Game.se5),t.boomboxPreload("balloon",window.Game.se6)).done(function(){o.resolve(),t.seReady=!0,t.setReturn()}).fail(function(){o.reject()}):o.resolve(),o.promise()},t.playBoomboxSE=function(e){a.getSeSetting()&&(void 0==t[e+"_bse"]?t.boomboxLoad(e):t[e+"_bse"].replay())},t.boomboxLoad=function(o){var n={src:[{media:"audio/mpeg",path:t.seList[o]+(window.chrome?"&v2="+Date.now():"")}]};d.load(o,n,window.Game.use_video,function(n,a){window.Game.use_video&&e("#video").append(a.$el);var r=d.get(o);r.volume(.7),r.play(),t[o+"_bse"]=r})},t.boomboxPreload=function(o,n){var a=e.Deferred(),r={src:[{media:"audio/mpeg",path:n+(window.chrome?"&v2="+Date.now():"")}]};try{d.load(o,r,window.Game.use_video,function(n,r){window.Game.use_video&&e("#video").append(r.$el);var i=d.get(o);i.volume(.7),t[o+"_bse"]=i,a.resolve()})}catch(e){a.reject()}return a.promise()},t.setReturn=function(){e("#drum_master").on("click",".back_to_top",function(){return t.playSE("don"),!0})},window.Game.useBoombox?(t.setSE=t.setBoomboxSE,t.playSE=t.playBoomboxSE):(t.setSE=t.setSoundjsSE,t.playSE=t.playSounjsSE),t});