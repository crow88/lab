"use strict";define(["underscore","backbone",window.Game.js_url_list.cjs001_hop_01,window.Game.js_url_list.const],function(t,i,n,a){var e=Date.now(),_=Date.now(),s=new Array(14),o=0,r=new Array(14),u=0,h=i.View.extend({el:"#bg_effect",fps:a.ORIGIN_FPS/2,current_animation:null,current_animation_index:null,current_animation_name:null,stream_animations:[],_animation_counter:0,_update_flag:!0,stream_effect_stage:null,fever:!1,initialize:function(t,i){this.animation_list=t,this.gauge=i,this.setup_animation("wait"),this.fps_interval=Math.floor(1/this.fps*1e3)-1,this.fps_interval2=a.FPS_INTERVAL_12},init:function(t){this.stream_effect_stage=t;for(var i=0;i<s.length;i++){var n=new window.lib.mc_hop;n.x=150,n.y=160,n.visible=!1,n.stop(),this.stream_effect_stage.addChild(n),s[i]=n}for(var i=0;i<r.length;i++){var a=new window.lib.mc_chara_bad;a.x=127,a.y=150,a.visible=!1,a.stop(),this.stream_effect_stage.addChild(a),r[i]=a}},tick:function(t){t-e>=this.fps_interval&&(e=t,this.update_counter()),null!==this.stream_effect_stage&&t-_>this.fps_interval2&&(_=t,this.stream_effect_stage.update())},setup_animation:function(t){this.current_animation&&!this.current_animation.interruptable||(this.current_animation=this.animation_list[t],this.current_animation_index=0,this.current_animation_name=t,this._animation_counter=0,this.update_animation(this._get_animation_info().name),this.update_counter())},update_counter:function(){this._animation_counter++,this._animation_counter>=this._get_animation_info().frame&&(this.current_animation_index++,this._animation_counter=0,this._update_flag=!0),this.current_animation_index>=this.current_animation.animation.length?"loop"==this.current_animation.end_action?this.current_animation_index=0:"once"==this.current_animation.end_action?(this.fever?this.setup_animation("fever"):this.gauge.is_max()?this.setup_animation("full_wait"):this.setup_animation("wait"),this.current_animation_index=0):this.current_animation.end_action?(this.setup_animation(this.current_animation.end_action),this.current_animation_index=0):this.current_animation=null:this._update_flag&&(this._update_flag=!1,this.update_animation(this._get_animation_info().name))},update_animation:function(t){void 0==this.$char_don&&(this.$char_don=$("#char_don")),this.$char_don.removeClass().addClass(t).show()},get_don:function(){return this.$char_don},update_fever:function(t){this.fever=t,this.fever?this.setup_animation("fever"):this.gauge.is_max()?this.setup_animation("full_wait"):this.setup_animation("wait")},_get_animation_info:function(){return this.current_animation.animation[this.current_animation_index]},make_stream_effect:function(t){null!==this.stream_effect_stage&&("bad"==t?(r[u].visible=!0,r[u].gotoAndPlay("animation_start"),r[u].instance.gotoAndPlay(0),u=++u%r.length):(s[o].visible=!0,s[o].gotoAndPlay("animation_start"),o=++o%s.length))}});return h});