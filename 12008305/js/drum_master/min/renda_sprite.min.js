"use strict";define([window.Game.js_url_list.tone,window.Game.js_url_list.const,window.Game.js_url_list.util],function(t,i,e){var s=window.createjs,r=function(t,e,r){this.originType="renda",this.type=t,this.stage=e,this.state="Wait",this.sprite={};var n=this.type.indexOf("str")>-1;this.sprite.body=new s.Bitmap(r.toneDom[(n?"renda_str":"renda")+"_middle"]),this.sprite.head=new s.Bitmap(r.toneDom[this.type+"_begin"]),this.sprite.tail=new s.Bitmap(r.toneDom[(n?"renda_str":"renda")+"_end"]);for(var a in this.sprite)"body"!=a&&(this.sprite[a].scaleX=i.RENDA_SCALE,this.sprite[a].regX=i.RENDA_TONE_HALF_SIZE),this.sprite[a].regY=i.RENDA_TONE_HALF_SIZE,this.sprite[a].scaleY=i.RENDA_SCALE,this.sprite[a].x=i.RENDA_START,this.sprite[a].y=i.GOAL_Y,this.sprite[a].z=0},n=r.prototype;return n.setXposition=function(t){this.sprite.head.x=t,this.sprite.body.x=t},n.setTailXposition=function(t){this.sprite.tail.x=t,this.setBodyScale()},n.setBodyScale=function(){this.sprite.body.scaleX=this.sprite.tail.x-this.sprite.body.x},n.getXposition=function(){return this.sprite.head.x},n.getTailXposition=function(){return this.sprite.tail.x},n.getBodyLength=function(){return this.sprite.body.scaleX},n.show=function(){for(var t in this.sprite)this.stage.addChild(this.sprite[t])},n.hide=function(){for(var t in this.sprite)this.stage.removeChild(this.sprite[t]);this.sprite.body.scaleX=1},n.setZindex=function(t){for(var i in this.sprite)this.stage.setChildIndex(this.sprite[i],t)},n.update=function(t){var i=e.calculate(this.note.time,t);return this.afterMath(i,t)},n.delayUpdate=function(t,i){var e=this.getXposition()-t;return this.afterMath(e,i)},n.afterMath=function(t,e){var s=i.NOTING,r=t+this.getBodyLength();return r<i.END_POINT?s=i.END_TONE:(this.sprite.head.x=t,this.sprite.body.x=t,this.sprite.tail.x=r,this.note.state==i.State.Fall&&parseInt(this.note.extension)+i.RENDA_RATE<e&&(this.note.state=i.State.Miss)),s},r});