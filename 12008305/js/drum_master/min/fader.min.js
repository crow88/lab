"use strict";define(["jquery"],function(e){function t(){a.on("webkitTransitionEnd",function(){switch(d){case n.fadein:d=n.ready,r._dispatch(o.FadeinComplete),a.css({height:"0"});break;case n.fadeout:d=n.ready,r._dispatch(o.FadeoutComplete);break;default:console.log("irregular state:"+d)}})}console.log("fader load.");var a,n={none:0,ready:1,fadein:2,fadeout:3},o={FadeinComplete:"fadeinComplete",FadeoutComplete:"fadeoutComplete"},d=n.none,i={};i[o.FadeinComplete]=[],i[o.FadeoutComplete]=[];var r=function(){};return r.FaderState=n,r.getFadeState=function(){return d},r.addEventListener=function(e,t){i[e][i[e].length]=t},r.removeEventListener=function(e,t){for(var a=0;a<i[e].length;a++)i[e][a].toString()==t.toString()&&i[e].splice(a,1)},r.fadein=function(t){void 0==t&&(t=e("#drum_master").height()+"px"),a.hasClass("_fadeout")&&(d=n.fadein,a.removeClass("_fadeout"),a.css({height:t}))},r.fadeout=function(t){void 0==t&&(t=e("#drum_master").height()+"px"),a.hasClass("_fadeout")||(d=n.fadeout,a.addClass("_fadeout"),a.css({height:t}))},r._dispatch=function(e){for(var t=0;t<i[e].length;t++)i[e][t]()},d=n.ready,a=e("#fader"),a.size()<=0&&(a=e("<div />").attr("id","fader"),e("#top").append(a),t()),r});